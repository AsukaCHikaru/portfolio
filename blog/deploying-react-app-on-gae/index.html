<!doctype html>
<html lang="en">
  <head>
    <script type="module" src="/index.js" async></script>
    <link rel="stylesheet" href="/fonts.css" />
    <link rel="stylesheet" href="/style.css" />
    <link rel="stylesheet" href="/modern-normalize.css" />
    <link
      rel="preload"
      href="/fonts/subset_extended_latin_NotoSerifJP_Regular.woff2"
      as="font"
      type="font/woff2"
      crossorigin="anonymous"
    />
    <link
      rel="preload"
      href="/fonts/subset_extended_latin_NotoSerifJP_ExtraLight.woff2"
      as="font"
      type="font/woff2"
      crossorigin="anonymous"
    />
    <link
      rel="preload"
      href="/fonts/subset_latin_NotoSerifJP_Bold.woff2"
      as="font"
      type="font/woff2"
      crossorigin="anonymous"
    />
    <link
      rel="preload"
      href="/fonts/subset_latin_NotoSans_Thin.woff2"
      as="font"
      type="font/woff2"
      crossorigin="anonymous"
    />
    <link
      rel="preload"
      href="/fonts/subset_extended_latin_GentiumBookPlus_Regular.woff2"
      as="font"
      type="font/woff2"
      crossorigin="anonymous"
    />
    <link
      rel="preload"
      href="/fonts/subset_extended_latin_GentiumBookPlus_Bold.woff2"
      as="font"
      type="font/woff2"
      crossorigin="anonymous"
    />
    <link
      rel="preload"
      href="/fonts/subset_extended_latin_GentiumPlus_Italic.woff2"
      as="font"
      type="font/woff2"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <div id="root"><div><div class="site_container"><nav class="site-header_grid-wrapper"><div class="site-header_container"><div><a href="/blog">blog</a><a href="/about">about</a></div><a href="/">ASUKA WANG</a></div><div class="site-header_divider" role="presentation"></div></nav><main><div class="post-page-header_container"><h1>Deploying React.js App on GAE</h1><h2></h2><p>2019-09-19</p></div><article><p>For people like me who have only used a static host like Amazon S3 before, deploying React app on Google App Engine is a challenge. For all the references I found it looks straightforward and easy to deploy a React app, yet I still struggled for 2 days. Here is how I did it, with the things I realized by logs and tries and errors.</p><h2>GAE is not a static host; it&#x27;s a virtual machine</h2><p>So you can&#x27;t just push the build. You have to serve it, like starting a development server. So the next problem is, how?</p><h2>With default config, GAE only executes two scripts when deploying</h2><p>They are <code>npm install</code> and <code>npm start</code>.</p><p>Like I mentioned before, for merely starting a server for React, these two seems enough. Then I found out it&#x27;s not, because default <code>npm start</code> provided by Create-React-App, which equals to <code>node scripts/start.js</code> if you check out <code>package.json</code>, takes much time, and it&#x27;s long enough to make the app not working. So we need a faster way to <i>serve</i> it.</p><h2>Serve can do the trick</h2><p>Literally, <a href="&lt;notion://www.notion.so/asukachikaru/%5B%3Chttps://github.com/zeit/serve%3E%5D(%3Chttps://github.com/zeit/serve%3E" target="_blank" rel="noopener noreferrer">serve</a>&gt;).</p><p>Notice serve needs static files to run, so we need to build it first. Since GAE only runs two scripts, and building takes some time too, so I bound it to <code>postinstall</code> instead of <code>prestart</code> . By this way, GAE automatically builds right after it installs dependencies.</p><p>You can also use some host framework (like express) to do the hosting and routing stuff too.</p><h2>Config the port</h2><p>React development server default port is 3000, and serve&#x27;s is 5000, while GAE uses 8080.</p><p>The scripts in <code>package.json</code> I used when finally successfully deployed looks like this:</p><div><pre class="shiki gruvbox-light-soft" style="background-color:#f2e5bc;color:#3c3836" tabindex="0"><code><span class="line"><span style="color:#7C6F64">"</span><span style="color:#076678">script</span><span style="color:#7C6F64">"</span><span style="color:#3C3836">: </span><span style="color:#7C6F64">{</span></span>
<span class="line"><span style="color:#7C6F64">  "</span><span style="color:#689D6A">postinstall</span><span style="color:#7C6F64">"</span><span style="color:#7C6F64">:</span><span style="color:#7C6F64"> "</span><span style="color:#076678">npm run build</span><span style="color:#7C6F64">"</span><span style="color:#7C6F64">,</span></span>
<span class="line"><span style="color:#7C6F64">  "</span><span style="color:#689D6A">start</span><span style="color:#7C6F64">"</span><span style="color:#7C6F64">:</span><span style="color:#7C6F64"> "</span><span style="color:#076678">serve -l 8080 -s build</span><span style="color:#7C6F64">"</span></span>
<span class="line"><span style="color:#7C6F64">}</span></span></code></pre></div><p>You need to configure app.yaml too, but I think many resources is talking about how to do it.</p><p>I hope this helps!</p></article></main><footer class="site-footer_container">Asuka Wang © <!-- -->2025</footer></div></div></div><script>window.__STATIC_PROPS__ = {"blog":{"post":{"metadata":{"title":"Deploying React.js App on GAE","publishedAt":"2019-09-19","pathname":"deploying-react-app-on-gae","category":"note","topic":"web development","language":"en-US","featured":false},"content":[{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"For people like me who have only used a static host like Amazon S3 before, deploying React app on Google App Engine is a challenge. For all the references I found it looks straightforward and easy to deploy a React app, yet I still struggled for 2 days. Here is how I did it, with the things I realized by logs and tries and errors."}]},{"type":"heading","level":2,"body":[{"type":"textBody","style":"plain","value":"GAE is not a static host; it's a virtual machine"}]},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"So you can't just push the build. You have to serve it, like starting a development server. So the next problem is, how?"}]},{"type":"heading","level":2,"body":[{"type":"textBody","style":"plain","value":"With default config, GAE only executes two scripts when deploying"}]},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"They are "},{"type":"textBody","style":"code","value":"npm install"},{"type":"textBody","style":"plain","value":" and "},{"type":"textBody","style":"code","value":"npm start"},{"type":"textBody","style":"plain","value":"."}]},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"Like I mentioned before, for merely starting a server for React, these two seems enough. Then I found out it's not, because default "},{"type":"textBody","style":"code","value":"npm start"},{"type":"textBody","style":"plain","value":" provided by Create-React-App, which equals to "},{"type":"textBody","style":"code","value":"node scripts/start.js"},{"type":"textBody","style":"plain","value":" if you check out "},{"type":"textBody","style":"code","value":"package.json"},{"type":"textBody","style":"plain","value":", takes much time, and it's long enough to make the app not working. So we need a faster way to "},{"type":"textBody","style":"italic","value":"serve"},{"type":"textBody","style":"plain","value":" it."}]},{"type":"heading","level":2,"body":[{"type":"textBody","style":"plain","value":"Serve can do the trick"}]},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"Literally, "},{"type":"link","body":[{"type":"textBody","style":"plain","value":"serve"}],"url":"\u003cnotion://www.notion.so/asukachikaru/%5B%3Chttps://github.com/zeit/serve%3E%5D(%3Chttps://github.com/zeit/serve%3E"},{"type":"textBody","style":"plain","value":"\u003e)."}]},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"Notice serve needs static files to run, so we need to build it first. Since GAE only runs two scripts, and building takes some time too, so I bound it to "},{"type":"textBody","style":"code","value":"postinstall"},{"type":"textBody","style":"plain","value":" instead of "},{"type":"textBody","style":"code","value":"prestart"},{"type":"textBody","style":"plain","value":" . By this way, GAE automatically builds right after it installs dependencies."}]},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"You can also use some host framework (like express) to do the hosting and routing stuff too."}]},{"type":"heading","level":2,"body":[{"type":"textBody","style":"plain","value":"Config the port"}]},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"React development server default port is 3000, and serve's is 5000, while GAE uses 8080."}]},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"The scripts in "},{"type":"textBody","style":"code","value":"package.json"},{"type":"textBody","style":"plain","value":" I used when finally successfully deployed looks like this:"}]},{"type":"code","lang":"json","body":"\"script\": {\n  \"postinstall\": \"npm run build\",\n  \"start\": \"serve -l 8080 -s build\"\n}"},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"You need to configure app.yaml too, but I think many resources is talking about how to do it."}]},{"type":"paragraph","body":[{"type":"textBody","style":"plain","value":"I hope this helps!"}]}]}}}</script>
  </body>
</html>
